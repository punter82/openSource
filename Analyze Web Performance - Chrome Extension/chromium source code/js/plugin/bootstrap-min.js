var message=chrome.runtime&&chrome.runtime.sendMessage?"runtime":"extension",performance="";chrome[message].onMessage.addListener(function(a,b){chrome.storage.local.get("cache",function(c){c.cache||(c.cache={}),c.cache["timing"+b.tab.id]=a.timing,c.cache["navigation"+b.tab.id]=a.navigation,c.cache["pageLoadTime"+b.tab.id]=a.time,c.cache["hostname"+b.tab.id]=a.hostname,c.cache["resources"+b.tab.id]=a.resources,chrome.storage.local.set(c)}),a.time<2?chrome.browserAction.setIcon({path:"icons/lightning.png",tabId:b.tab.id}):a.time>=2&&a.time<5?chrome.browserAction.setIcon({path:"icons/horse.png",tabId:b.tab.id}):a.time>=5&&a.time<8?chrome.browserAction.setIcon({path:"icons/turtle.png",tabId:b.tab.id}):a.time>=8&&chrome.browserAction.setIcon({path:"icons/snail.png",tabId:b.tab.id}),chrome.browserAction.setBadgeBackgroundColor({color:"#000"}),chrome.browserAction.setBadgeText({text:a.time.toFixed(1)+"s",tabId:b.tab.id})}),chrome.tabs.onRemoved.addListener(function(a){chrome.storage.local.get("cache",function(b){b.cache&&delete b.cache["timing"+a],b.cache&&delete b.cache["navigation"+a],b.cache&&delete b.cache["pageLoadTime"+a],b.cache&&delete b.cache["hostname"+a],b.cache&&delete b.cache["resources"+a],chrome.storage.local.set(b)})});